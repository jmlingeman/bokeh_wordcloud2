/*!
 * Copyright (c) 2012 - 2020, Anaconda, Inc., and Bokeh Contributors
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 * 
 * Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 * 
 * Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 * 
 * Neither the name of Anaconda nor the names of any contributors
 * may be used to endorse or promote products derived from this software
 * without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF
 * THE POSSIBILITY OF SUCH DAMAGE.
*/
(function(root, factory) {
  factory(root["Bokeh"], undefined);
})(this, function(Bokeh, version) {
  var define;
  return (function(modules, entry, aliases, externals) {
    const bokeh = typeof Bokeh !== "undefined" && (version != null ? Bokeh[version] : Bokeh);
    if (bokeh != null) {
      return bokeh.register_plugin(modules, entry, aliases);
    } else {
      throw new Error("Cannot find Bokeh " + version + ". You have to load it prior to loading plugins.");
    }
  })
({
"6a4b8efd20": function _(e,o,t){Object.defineProperty(t,"__esModule",{value:!0});const r=e("tslib").__importStar(e("8dc204e7cb"));t.WordCloud2=r;e("@bokeh/bokehjs/base").register_models(r)},
"8dc204e7cb": function _(e,o,d){Object.defineProperty(d,"__esModule",{value:!0});var r=e("c478435e22");d.WordCloud2=r.WordCloud2},
"c478435e22": function _(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});const s=e("tslib");var i=this&&this.__decorate||function(e,t,o,s){var i,r=arguments.length,n=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,o):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n};const r=e("@bokeh/bokehjs/models/widgets/widget"),n=s.__importStar(e("@bokeh/bokehjs/core/properties")),l=e("@bokeh/bokehjs/models/sources/cds_view"),h=e("@bokeh/bokehjs/models/widgets"),c=e("@bokeh/bokehjs/models/sources/column_data_source"),d=e("@bokeh/bokehjs/core/util/object"),a=e("@bokeh/bokehjs/core/util/array"),m=e("@bokeh/bokehjs/core/bokeh_events");o.DTINDEX_NAME="__bkdt_internal_index__";let u=class extends m.BokehEvent{constructor(e,t){super(),this.word=e,this.weight=t}_to_json(){const{word:e,weight:t}=this;return{weight:t,word:e}}};var g;o.WordClickEvent=u,u.__name__="WordClickEvent",o.WordClickEvent=u=i([(g="word_click_event",function(e){e.prototype.event_name=g})],u);class f{constructor(e,t){if(this.source=e,this.view=t,o.DTINDEX_NAME in this.source.data)throw new Error(`special name ${o.DTINDEX_NAME} cannot be used as a data table column`);var s=[];for(const e of this.view.indices)s.push(e);this.index=s}getLength(){return this.index.length}getItem(e){const t={};for(const o of d.keys(this.source.data))t[o]=this.source.data[o][this.index[e]];return t[o.DTINDEX_NAME]=this.index[e],t}getRecords(){return a.range(0,this.getLength()).map(e=>this.getItem(e))}}function _(e){return(t=e)[Math.floor(Math.random()*t.length)];var t}f.__name__="DataProvider";class w extends r.WidgetView{DEFAULT_WEIGHT_FACTOR(e){return Math.pow(e,2.3)*this.model.height/1024}initialize(){this.DEFAULT_WEIGHT_FACTOR=this.DEFAULT_WEIGHT_FACTOR.bind(this),super.initialize(),this.prepare()}prepare(){if(this.model.fontWeight&&"function"==typeof this.model.fontWeight.execute){const e=this.model.weightFactor;this.model.fontWeight=(t,o,s)=>{const i={word:t,weight:o,font_size:s};return e.execute(this.model,i)}}if(this.model.weightFactor&&"function"==typeof this.model.weightFactor.execute){const e=this.model.weightFactor;this.model.weightFactor=t=>{const o={size:t};return e?e.execute(this.model,o):this.DEFAULT_WEIGHT_FACTOR}}if(this.model.classes&&"function"==typeof this.model.classes.execute){const e=this.model.classes;this.model.classes=(t,o,s)=>{const i={word:t,weight:o,font_size:s};return e.execute(this.model,i)}}if(this.model.color&&"function"==typeof this.model.color.execute){const e=this.model.color;this.model.color=(t,o,s,i,r)=>{const n={word:t,weight:o,font_size:s,distance:i,theta:r};return e.execute(this.model,n)}}else if("object"==typeof this.model.color&&"function"==typeof this.model.color.slice){const e=this.model.color;this.model.color=()=>_(e)}else if("string"==typeof this.model.color){const e=this.model.source.get_column(this.model.color);if(e&&e.length>0){const e={},t=this.model.source.get_column(this.model.color),o=this.model.source.get_column(this.model.wordCol);if(o&&o.length&&t&&t.length)for(let s=0;s<o.length;s++)o[s]&&t[s]&&(e[o[s]]=t[s]);this.model.color=t=>e[t]}}}connect_signals(){super.connect_signals(),this.connect(this.model.source.change,()=>{this.prepare(),this.render()})}css_classes(){return super.css_classes().concat("bk-data-table")}get_sizes1(){if(!this.model.sizeCol){let e=[];return this.data.getRecords().map(t=>{const o=t[this.model.wordCol].toUpperCase().match(/([A-Z]+)/);e.push(...o)}),function(e){const t=function(e){const t={};for(let o of e)t[o]=t[o]?t[o]+1:1;return t}(e);return Object.keys(t).map(e=>[e,t[e]]).sort((e,t)=>t[1]-e[1])}(e).slice(0,50)}const e=[];return this.data.getRecords().map(t=>{e.push([t[this.model.wordCol],t[this.model.sizeCol]])}),e}render(){super.render(),this.data=new f(this.model.source,this.model.view);let e=this.get_sizes1();const t=document.createElement("canvas");t.width=this.model.width,t.height=this.model.height;const o=Math.round(16*this.model.width/1024),s={list:e,fontFamily:this.model.fontFamily?this.model.fontFamily:"Times, serif",gridSize:this.model.gridSize?this.model.gridSize:o,weightFactor:this.model.weightFactor?this.model.weightFactor:this.DEFAULT_WEIGHT_FACTOR,color:this.model.color,rotateRatio:this.model.rotateRatio,minRotation:this.model.minRotation,maxRotation:this.model.maxRotation,rotationSteps:this.model.rotationSteps,shuffle:!1,backgroundColor:this.model.background,drawOutOfBound:!1,classes:this.model.classes,fontWeight:this.model.fontWeight,shape:this.model.shape,click:(e,t,o)=>{let s=void 0;if(this.model.sizeCol){const t=this.data.getLength();for(let o=0;o<t;o++){const t=this.data.getItem(o);if(t[this.model.wordCol]===e[0]&&t[this.model.sizeCol]===e[1]){s=this.data.source,s.selected.indices=[o];break}}}void 0===s&&(s=new c.ColumnDataSource({data:{word:[e[0]],weight:[e[1]]}}),s.selected.indices=[0]);const i={word:e[0],weight:e[1],extra:e[2],dimensions:t,event:o,source:s};this.model.click&&this.model.click.execute(this.model,i)},hover:this.model.hover?(...e)=>{if(this.model.hover){if(!e||!e[0])return;const t={word:e[0][0],weight:e[0][1],dimensions:e[1],event:e[2]};this.model.hover.execute(this.model,t)}}:null};this.el.appendChild(t),WordCloud(t,s)}}o.WordCloud2View=w,w.__name__="WordCloud2View";class p extends h.Widget{constructor(e){super(e)}static initClass(){this.prototype.type="WordCloud2",this.prototype.default_view=w,this.define({source:[n.Instance],view:[n.Instance,()=>new l.CDSView],wordCol:[n.String],sizeCol:[n.String],color:[n.Any,"blue"],fontWeight:[n.Any,"normal"],classes:[n.Any,null],hover:[n.Instance,null],click:[n.Instance,null],rotateRatio:[n.Number,1],minRotation:[n.Number,0],maxRotation:[n.Number,Math.PI/2],rotationSteps:[n.Number,32],gridSize:[n.Number,16],fontFamily:[n.String,"Times, Serif"],shape:[n.String,"square"],weightFactor:[n.Any,null]}),this.override({width:600,height:400,background:"#FFFFFF"})}}o.WordCloud2=p,p.__name__="WordCloud2",p.initClass()},
}, "6a4b8efd20", {"index":"6a4b8efd20","typescript/index":"8dc204e7cb","typescript/extension_bokeh_wordcloud2":"c478435e22"}, {});
})

